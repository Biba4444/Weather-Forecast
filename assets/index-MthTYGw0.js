(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}})();const v=async()=>{if(window.navigator.geolocation)return new Promise((e,o)=>{navigator.geolocation.getCurrentPosition(async n=>{const{latitude:r,longitude:t}=n.coords;console.log(`Latitude: ${r}, Longitude: ${t}`);const a=`https://api.openweathermap.org/data/2.5/weather?lat=${r}&lon=${t}&appid=a1060c908bea315aba0920d1cd09a732`;try{const p=await(await fetch(a)).json(),{name:i}=p;console.log(`Location name: ${i}`);const l=`https://api.openweathermap.org/geo/1.0/direct?q=${i}&limit=1&appid=a1060c908bea315aba0920d1cd09a732`;console.log(`City Geo URL: ${l}`),e(l)}catch(c){console.error(`Error fetching weather data: ${c}`),o(c)}},n=>{console.error(`Geolocation error: ${n.message}`),o(n)})});throw console.error("Geolocation is not supported by this browser."),new Error("Geolocation is not supported by this browser.")};let u="",m="",h="";const x=document.querySelector("#cityInput"),D=document.querySelector("#applyCity"),s={};(async()=>{try{u=await v();const e=await y();w(e)}catch(e){console.error(`Error: ${e.message}`)}})();D.addEventListener("click",async e=>{e.preventDefault(),u=`https://api.openweathermap.org/geo/1.0/direct?q=${x.value.trim().toLowerCase()}&limit=1&appid=a1060c908bea315aba0920d1cd09a732`;try{const n=await y();w(n)}catch(n){console.error("Error fetching city data:",n)}});const y=async()=>{try{const e=await fetch(u);if(!e.ok)throw new Error(`HTTP error: ${e.status}`);return e.json()}catch(e){throw new Error(e)}},w=async e=>{if(e.length>0){N(e),m=`https://api.openweathermap.org/data/2.5/weather?lat=${s.lat}&lon=${s.lon}&appid=a1060c908bea315aba0920d1cd09a732`,h=`https://api.openweathermap.org/data/2.5/forecast?lat=${s.lat}&lon=${s.lon}&appid=a1060c908bea315aba0920d1cd09a732`;try{const o=await F();M(o);const n=await H();G(n)}catch(o){console.error("Error fetching weather data:",o)}}else console.log("City not found"),document.querySelector("#cityName").innerHTML="City not found"},F=async()=>{try{const e=await fetch(m);if(!e.ok)throw new Error(`HTTP error: ${e.status}`);return e.json()}catch(e){throw new Error(e)}},H=async()=>{try{const e=await fetch(h);if(!e.ok)throw new Error(`HTTP error: ${e.status}`);const o=await e.json();return{...o.city,name:o.city.name,list:o.list.slice(0,17)}}catch(e){throw new Error(e)}},N=e=>{const o=document.querySelector("#cityName");e.map(({name:n,lat:r,lon:t,country:a})=>{o.textContent=`${n}, ${a}`,s.lat=r,s.lon=t})},M=e=>{const o=document.querySelector("#mainWeather"),n=document.querySelector("#weathDesc"),r=document.querySelector("#temp"),t=document.querySelector("#feelsTemp"),a=document.querySelector("#pressure"),c=document.querySelector("#weatherIcon"),p=document.querySelector("#time"),{main:i,weather:l,timezone:g}=e,{temp:f,feels_like:$,pressure:C}=i,d=new Date,b=d.getUTCHours(),q=d.getUTCMinutes(),E=(b+g/3600)%24,S=q.toString().padStart(2,"0");r.textContent=`Temperature: ${(f-273.15).toFixed(1)}°C`,t.textContent=`Feels like: ${($-273.15).toFixed(1)}°C`,a.textContent=`Pressure: ${C} hPa`,p.textContent=`${Math.floor(E).toString().padStart(2,"0")}:${S}`,l.map(({main:L,description:P,icon:T})=>{o.textContent=L,n.textContent=P,c.src=`https://openweathermap.org/img/wn/${T}@4x.png`})},G=e=>{const o=document.getElementById("data-container"),{list:n}=e;n.map(r=>({dt:r.dt,main:r.main,weather:r.weather})),document.querySelector(".data-block")&&document.querySelectorAll(".data-block").forEach(t=>{t.remove()}),n.forEach(r=>{const t=document.createElement("div");t.classList.add("data-block"),t.innerHTML=`
    <p>
    <img
    src="https://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png"
    >
    </p>
    <p>${new Date(r.dt*1e3).toLocaleString()}</p>
    <p><strong>Weather:</strong> ${r.weather[0].description}</p>
      <p><strong>Temperature:</strong> ${(r.main.temp-273.15).toFixed(1)}°C</p>
      <p><strong>Pressure:</strong> ${r.main.pressure} hPa</p>
    `,o.appendChild(t)})};
